{"ast":null,"code":"var _jsxFileName = \"/home/justact/13-12-2021(Frontend Dev)/justact-fe/src/components/pages/NegotiationPages/common/CommentBox.js\",\n    _theme$breakpoints,\n    _theme$breakpoints2,\n    _theme$breakpoints3,\n    _theme$breakpoints4,\n    _theme$breakpoints5,\n    _theme$breakpoints6,\n    _theme$breakpoints7,\n    _theme$breakpoints8,\n    _theme$breakpoints9,\n    _theme$breakpoints10,\n    _theme$breakpoints11,\n    _theme$breakpoints12,\n    _theme$breakpoints13;\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, makeStyles, Menu, MenuItem, CircularProgress } from \"@material-ui/core\";\nimport StatusBadge from \"../../../common/StatusBadge\";\nimport { Images } from \"../../../../assets/images\";\nimport { DropDown, Icon, Actions, Heading, Header } from \"../styles\";\nimport styled, { css } from \"styled-components\";\nimport COLORS from \"../../../../assets/Colors\";\nimport theme from \"../../../../assets/theme\";\nimport _ from \"lodash\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport moment from \"moment\";\nimport { PrimaryCTAButton } from \"../../../common/Buttons\";\nimport CaseService from \"../../../../services/CaseService\";\nimport useLoader from \"../../../../hooks/useLoader\";\nimport { useSnackbar } from \"notistack\";\nimport { getErrorMessage, parseTimeStamp } from \"../../../../helpers/functions\";\nimport useUser from \"../../../../hooks/useUser\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nvar icons = ReactQuill.Quill.import(\"ui/icons\");\nicons[\"bold\"] = `<img src=${require(\"../../../../assets/images/editor/bold.svg\")} aria-hidden=\"true\" />`;\nicons[\"italic\"] = `<img src=${require(\"../../../../assets/images/editor/italics.svg\")} aria-hidden=\"true\" />`;\nicons[\"underline\"] = `<img src=${require(\"../../../../assets/images/editor/underline.svg\")} aria-hidden=\"true\" />`;\nicons[\"blockquote\"] = `<img src=${require(\"../../../../assets/images/editor/blockQuote.svg\")} aria-hidden=\"true\" />`;\nicons[\"align\"][\"\"] = `<img src=${require(\"../../../../assets/images/editor/leftAlign.svg\")} aria-hidden=\"true\" />`;\nicons[\"align\"][\"center\"] = `<img src=${require(\"../../../../assets/images/editor/centerAlign.svg\")} aria-hidden=\"true\" />`;\nicons[\"align\"][\"right\"] = `<img src=${require(\"../../../../assets/images/editor/rightAlign.svg\")} aria-hidden=\"true\" />`;\nconst modules = {\n  toolbar: [[{\n    align: \"\"\n  }, {\n    align: \"center\"\n  }, {\n    align: \"right\"\n  }, \"bold\", \"italic\", \"underline\", \"blockquote\"]]\n};\nconst useStyles = makeStyles(themes => ({\n  root: {\n    boxShadow: \"none\",\n    [themes.breakpoints.up(640)]: {\n      border: `solid 0.5px #e1e3ee`\n    }\n  },\n  content: {\n    margin: `0 !important`,\n    \"& .MuiExpansionPanelSummary-content.Mui-expanded\": {\n      margin: `0 !important`\n    }\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: `0px !important`\n  },\n  paper: {\n    boxShadow: \"none\",\n    border: \"solid 0.5px #e1e3ee\"\n  },\n  menuRoot: {\n    fontFamily: theme.fonts.primaryFontSemiBold,\n    fontSize: 12,\n    color: COLORS.COLOR_DARK,\n    display: \"flex\",\n    flex: 1,\n    alignItems: \"center\"\n  }\n}));\nconst roleColors = {\n  mediator: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(246, 180, 54, 0.3)\"\n  },\n  caseManager: {\n    color: \"#f4f6ff\",\n    \"background-color\": \"#293461\"\n  },\n  respondent: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(255, 60, 60, 0.3)\"\n  },\n  claimant: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(0, 131, 140, 0.3)\"\n  },\n  other: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(0, 131, 140, 0.3)\"\n  }\n};\nconst ESCAPE_HTML_REGEX = /(<([^>]+)>)/gi;\nexport default function CommentBox({\n  title,\n  status,\n  errorText,\n  comments,\n  caseId,\n  setComments,\n  disabled = false,\n  hideAddComment = false,\n  hasMediator = false,\n  hasCaseManager = false,\n  partyList = [],\n  kind = \"Mediator\"\n}) {\n  var _comments$sort, _partyList$filter;\n\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState((comments === null || comments === void 0 ? void 0 : comments.length) > 0 || !hideAddComment);\n  const [trigggerStateChange, setTrigggerStateChange] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const chatContainerRef = useRef();\n  const [comment, setComment] = useState(\"\");\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    setLoader\n  } = useLoader();\n  const {\n    userObject\n  } = useUser();\n  const [currentOwnerParty, setCurrentOwnerParty] = useState(\"\");\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  useEffect(() => {\n    if (trigggerStateChange) {\n      setTrigggerStateChange(false);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [trigggerStateChange]);\n  useEffect(() => {\n    if (partyList === null || partyList === void 0 ? void 0 : partyList.length) {\n      let currentPartyId = \"\";\n      partyList.forEach(el => {\n        el.party.agents.forEach(agent => {\n          if ((agent === null || agent === void 0 ? void 0 : agent.userId) === (userObject === null || userObject === void 0 ? void 0 : userObject.id)) {\n            var _el$party;\n\n            currentPartyId = (_el$party = el.party) === null || _el$party === void 0 ? void 0 : _el$party.id;\n          }\n        });\n      });\n      setCurrentOwnerParty(currentPartyId);\n    }\n  }, [partyList, userObject]);\n  useEffect(() => {\n    if (chatContainerRef === null || chatContainerRef === void 0 ? void 0 : chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatContainerRef]);\n\n  async function send(visibilityType = \"all\", partyId) {\n    try {\n      setLoader({\n        state: true,\n        message: \"Submitting response...\"\n      });\n      const postbody = {\n        content: comment,\n        visibilityType,\n        visibilityPartyId: partyId\n      };\n      const response = await CaseService.sendComment(caseId, postbody);\n\n      if (response === null || response === void 0 ? void 0 : response.currentComment) {\n        setComments(c => [{ ...(response === null || response === void 0 ? void 0 : response.currentComment),\n          owner: userObject\n        }, ...c]);\n        enqueueSnackbar(response === null || response === void 0 ? void 0 : response.message, {\n          variant: \"success\"\n        });\n      }\n    } catch (error) {\n      const message = getErrorMessage(error);\n      enqueueSnackbar(message, {\n        variant: \"error\"\n      });\n    } finally {\n      setLoader({\n        state: false\n      });\n    }\n  } // useEffect(() => {}, [currentPage]);\n\n\n  const loadMore = () => {\n    console.log(\"load more\");\n  };\n\n  console.log(\"comments?.length\", disabled);\n  return /*#__PURE__*/React.createElement(ExpansionPanel, {\n    className: classes.root,\n    expanded: expanded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ExpansionPanelSummary, {\n    classes: {\n      content: classes.content\n    },\n    onClick: () => setExpanded(e => !e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    style: {\n      marginBottom: \"unset\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, title)), status && /*#__PURE__*/React.createElement(StatusBadge, {\n    text: status === \"success\" ? \"Negotiation Successful\" : errorText ? errorText : \"Negotiation In Progress\",\n    status: status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DropDown, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    src: Images.dropDownArrow,\n    alt: \"dropdown\",\n    expanded: expanded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(ExpansionPanelDetails, {\n    className: classes.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }\n  }, (comments === null || comments === void 0 ? void 0 : comments.length) > 0 || !hideAddComment ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MsgBox, {\n    ref: chatContainerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    pageStart: 0,\n    loadMore: loadMore,\n    initialLoad: false,\n    hasMore: false,\n    useWindow: false,\n    threshold: 50,\n    isReverse: true,\n    loader: /*#__PURE__*/React.createElement(Loader, {\n      key: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 21\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 15\n    }\n  }, \" \", comments === null || comments === void 0 ? void 0 : (_comments$sort = comments.sort((a, b) => new Date(moment(a === null || a === void 0 ? void 0 : a.created_at)) - new Date(moment(b === null || b === void 0 ? void 0 : b.created_at)))) === null || _comments$sort === void 0 ? void 0 : _comments$sort.map(comment => {\n    var _comment$owner, _partyList$find, _partyList$find$party, _partyList$find2, _partyList$find2$part, _comment$zoomLink, _comment$zoomLink2, _comment$zoomLink3, _comment$zoomLink4;\n\n    return /*#__PURE__*/React.createElement(CommentContainer, {\n      isOwner: (comment === null || comment === void 0 ? void 0 : comment.partyId) === currentOwnerParty && (comment === null || comment === void 0 ? void 0 : comment.ownerType) === \"agent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(CommentUserName, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 27\n      }\n    }, comment === null || comment === void 0 ? void 0 : (_comment$owner = comment.owner) === null || _comment$owner === void 0 ? void 0 : _comment$owner.name), /*#__PURE__*/React.createElement(SenderRole, {\n      style: {\n        marginLeft: 15\n      },\n      role: roleColors[(comment === null || comment === void 0 ? void 0 : comment.ownerType) === \"agent\" ? comment === null || comment === void 0 ? void 0 : comment.ownerRole : comment === null || comment === void 0 ? void 0 : comment.ownerType],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 27\n      }\n    }, _.startCase((comment === null || comment === void 0 ? void 0 : comment.ownerType) === \"agent\" ? comment === null || comment === void 0 ? void 0 : comment.ownerRole : (comment === null || comment === void 0 ? void 0 : comment.ownerType) === \"mediator\" ? kind : comment === null || comment === void 0 ? void 0 : comment.ownerType))), /*#__PURE__*/React.createElement(PrivateContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(BigScreen, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 27\n      }\n    }, (comment === null || comment === void 0 ? void 0 : comment.visibilityType) !== \"all\" && /*#__PURE__*/React.createElement(PrivateContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(LockIcon, {\n      src: require(\"../../../../assets/images/lock.svg\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(PrivateText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 33\n      }\n    }, \"Private to\", \" \", (comment === null || comment === void 0 ? void 0 : comment.visibilityPartyId) ? (partyList === null || partyList === void 0 ? void 0 : (_partyList$find = partyList.find(el => (el === null || el === void 0 ? void 0 : el.partyId) === (comment === null || comment === void 0 ? void 0 : comment.visibilityPartyId))) === null || _partyList$find === void 0 ? void 0 : (_partyList$find$party = _partyList$find.party) === null || _partyList$find$party === void 0 ? void 0 : _partyList$find$party.name) || _.startCase(comment === null || comment === void 0 ? void 0 : comment.visibilityType) : (comment === null || comment === void 0 ? void 0 : comment.visibilityType) === \"mediator\" ? kind : _.startCase(comment === null || comment === void 0 ? void 0 : comment.visibilityType)))))), /*#__PURE__*/React.createElement(CommentTimestamp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(SmallScreen, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 23\n      }\n    }, (comment === null || comment === void 0 ? void 0 : comment.visibilityType) !== \"all\" && /*#__PURE__*/React.createElement(PrivateContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(LockIcon, {\n      src: require(\"../../../../assets/images/padlock.svg\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(PrivateText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 29\n      }\n    }, \"Private to\", \" \", (comment === null || comment === void 0 ? void 0 : comment.visibilityPartyId) ? (partyList === null || partyList === void 0 ? void 0 : (_partyList$find2 = partyList.find(el => (el === null || el === void 0 ? void 0 : el.partyId) === (comment === null || comment === void 0 ? void 0 : comment.visibilityPartyId))) === null || _partyList$find2 === void 0 ? void 0 : (_partyList$find2$part = _partyList$find2.party) === null || _partyList$find2$part === void 0 ? void 0 : _partyList$find2$part.name) || _.startCase(comment === null || comment === void 0 ? void 0 : comment.visibilityType) : (comment === null || comment === void 0 ? void 0 : comment.visibilityType) === \"mediator\" ? kind : _.startCase(comment === null || comment === void 0 ? void 0 : comment.visibilityType)))), (comment === null || comment === void 0 ? void 0 : comment.content) && /*#__PURE__*/React.createElement(CommentContent, {\n      dangerouslySetInnerHTML: {\n        __html: comment === null || comment === void 0 ? void 0 : comment.content\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 25\n      }\n    }), !_.isEmpty(comment === null || comment === void 0 ? void 0 : comment.zoomLink) && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 31\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 31\n      }\n    }, moment(new Date(comment === null || comment === void 0 ? void 0 : (_comment$zoomLink = comment.zoomLink) === null || _comment$zoomLink === void 0 ? void 0 : _comment$zoomLink.date)).format(\"DD-MM-YYYY\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-field\",\n      style: {\n        marginLeft: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 31\n      }\n    }, \"Time\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 31\n      }\n    }, moment(new Date(comment === null || comment === void 0 ? void 0 : (_comment$zoomLink2 = comment.zoomLink) === null || _comment$zoomLink2 === void 0 ? void 0 : _comment$zoomLink2.date)).format(\"hh:mm A\"), \" \", \"(IST)\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"action-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(PrimaryCTAButton, {\n      disabled: moment(new Date()).isAfter(moment(new Date(comment === null || comment === void 0 ? void 0 : (_comment$zoomLink3 = comment.zoomLink) === null || _comment$zoomLink3 === void 0 ? void 0 : _comment$zoomLink3.date)).add(1, \"day\")) || (comment === null || comment === void 0 ? void 0 : (_comment$zoomLink4 = comment.zoomLink) === null || _comment$zoomLink4 === void 0 ? void 0 : _comment$zoomLink4.disable),\n      onClick: () => {\n        var _comment$zoomLink5;\n\n        return window.open(comment === null || comment === void 0 ? void 0 : (_comment$zoomLink5 = comment.zoomLink) === null || _comment$zoomLink5 === void 0 ? void 0 : _comment$zoomLink5.url, \"_blank\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 31\n      }\n    }, \"Join\")))));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 13\n    }\n  }, hideAddComment ? null : /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(EditorContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ReactQuill, {\n    onChange: text => setComment(text),\n    modules: modules,\n    placeholder: \"Record the Proceedings\\u2026\",\n    readOnly: disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(ButtonContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(PrimaryCTAButton, {\n    \"aria-controls\": \"comment-send-menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick,\n    disabled: disabled || !(comment === null || comment === void 0 ? void 0 : comment.replace(ESCAPE_HTML_REGEX, \"\").trim()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 21\n    }\n  }, \"Send\"), /*#__PURE__*/React.createElement(Menu, {\n    id: \"comment-send-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    classes: {\n      paper: classes.paper\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 23\n    }\n  }, \"SEND TO\"), /*#__PURE__*/React.createElement(MenuItem, {\n    className: classes.menuRoot,\n    onClick: () => send(\"all\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 23\n    }\n  }, \"All\"), !!hasMediator && /*#__PURE__*/React.createElement(MenuItem, {\n    className: classes.menuRoot,\n    onClick: () => send(\"mediator\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 25\n    }\n  }, kind), hasCaseManager && /*#__PURE__*/React.createElement(MenuItem, {\n    className: classes.menuRoot,\n    onClick: () => send(\"caseManager\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 25\n    }\n  }, \"Case Manager\"), partyList === null || partyList === void 0 ? void 0 : (_partyList$filter = partyList.filter(el => {\n    var _el$party2;\n\n    return (el === null || el === void 0 ? void 0 : (_el$party2 = el.party) === null || _el$party2 === void 0 ? void 0 : _el$party2.id) !== currentOwnerParty;\n  })) === null || _partyList$filter === void 0 ? void 0 : _partyList$filter.map((item, index) => {\n    var _item$party, _item$party2;\n\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: index,\n      className: classes.menuRoot,\n      onClick: () => send(item === null || item === void 0 ? void 0 : item.partyRole, item === null || item === void 0 ? void 0 : item.partyId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(ParyName, {\n      title: item === null || item === void 0 ? void 0 : (_item$party = item.party) === null || _item$party === void 0 ? void 0 : _item$party.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 29\n      }\n    }, item === null || item === void 0 ? void 0 : (_item$party2 = item.party) === null || _item$party2 === void 0 ? void 0 : _item$party2.name), /*#__PURE__*/React.createElement(MenuLabel, {\n      className: \"partyLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 29\n      }\n    }, _.capitalize(item === null || item === void 0 ? void 0 : item.partyRole)));\n  })))))) : /*#__PURE__*/React.createElement(EmptyMsg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 11\n    }\n  }, \"There are no comments yet.\")));\n}\nconst Title = styled.div`\n  margin-left: 15px;\n  text-transform: none;\n  font-weight: 800;\n  font-size: 14px;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints = theme.breakpoints) === null || _theme$breakpoints === void 0 ? void 0 : _theme$breakpoints.sm_up} {\n    margin-left: 21px;\n    font-size: 18px;\n  }\n`;\nconst MsgBox = styled.div`\n  padding: 0 15px 15px;\n  max-height: 400px;\n  overflow: auto;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints2 = theme.breakpoints) === null || _theme$breakpoints2 === void 0 ? void 0 : _theme$breakpoints2.sm_up} {\n    padding: 0 20px 20px;\n  }\n`;\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints3 = theme.breakpoints) === null || _theme$breakpoints3 === void 0 ? void 0 : _theme$breakpoints3.sm_up} {\n    flex-direction: row;\n  }\n`;\nconst Label = styled.div`\n  font-family: ${theme.fonts.primaryFontBold};\n  font-size: 10px;\n  letter-spacing: 0.33px;\n  color: #acb1c2;\n  padding: 0 16px 5px;\n`;\nconst ButtonContainer = styled.div`\n  position: relative;\n  margin: 15px 10px 0 10px;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints4 = theme.breakpoints) === null || _theme$breakpoints4 === void 0 ? void 0 : _theme$breakpoints4.sm_up} {\n    margin: 0;\n    margin-left: 24px;\n    align-self: flex-end;\n    width: 144px;\n  }\n`;\nconst ParyName = styled.div`\n  max-width: 100px;\n  width: 100%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\nconst MenuLabel = styled.div`\n  color: ${COLORS.INPUT_LABEL};\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  font-size: 10px;\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n  margin-left: 10px;\n`;\nconst CommentContainer = styled.div`\n  padding: 20px 10px;\n  border-radius: 7px;\n  background-color: ${props => props.isOwner ? COLORS.LIGHT_BLUE : COLORS.PRIMARY_WHITE};\n  border: solid 1px\n    ${props => props.isOwner ? COLORS.COLOR_DARK : COLORS.INPUT_BORDER};\n  margin-bottom: 12px;\n  max-width: 730px;\n  & #flex {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints5 = theme.breakpoints) === null || _theme$breakpoints5 === void 0 ? void 0 : _theme$breakpoints5.sm_up} {\n    padding: 18px;\n  }\n  & .data-container {\n    display: flex;\n    padding: 15px 0px;\n    & .data-field {\n      font-family: ${theme.fonts.primaryFontSemiBold};\n      & .label {\n        color: ${COLORS.INPUT_LABEL};\n        font-size: 10px;\n      }\n      & .value {\n        color: ${COLORS.PRIMARY_BLACK};\n        margin-top: 2px;\n      }\n    }\n  }\n\n  & .action_container {\n    display: flex;\n    padding-top: 15px;\n    .action-btn {\n      width: 150px;\n    }\n`;\nconst CommentUserName = styled.div`\n  color: ${COLORS.BTN_GREEN};\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  font-size: 14px;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints6 = theme.breakpoints) === null || _theme$breakpoints6 === void 0 ? void 0 : _theme$breakpoints6.sm_up} {\n    font-size: 16px;\n  }\n`;\nconst CommentTimestamp = styled.div`\n  color: #acb1c2;\n  font-size: 10px;\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints7 = theme.breakpoints) === null || _theme$breakpoints7 === void 0 ? void 0 : _theme$breakpoints7.sm_up} {\n    font-size: 12px;\n    margin-top: 8px;\n  }\n`;\nconst CommentContent = styled.div`\n  font-size: 14px;\n  word-break: break-word;\n  color: ${COLORS.COLOR_DARK};\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  margin-top: 18px;\n  & strong,\n  & bold {\n    font-family: ${theme.fonts.primaryFontExtraBold};\n  }\n  & .ql-align-center {\n    text-align: center;\n  }\n  & .ql-align-right {\n    text-align: right;\n  }\n  & blockquote {\n    border-left: 4px solid #ccc;\n    margin-bottom: 5px;\n    margin-top: 5px;\n    padding-bottom: 5px;\n    padding-top: 5px;\n    padding-left: 16px;\n    background-color: #f9f9f9;\n  }\n`;\nconst SenderRole = styled.div`\n  font-size: 12px;\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  padding: 4px 10px;\n  border-radius: 4px;\n  ${({\n  role\n}) => role ? Object.keys(role).map(key => css`\n              ${key}: ${role[key]};\n            `) : null}\n  user-select:none;\n`;\nconst Loader = styled.div`\n  display: flex;\n  justify-content: center;\n`;\nconst EditorContainer = styled.div`\n  width: 100%;\n  & .rdw-editor-wrapper,\n  .ql-editor,\n  .ql-container {\n    background-color: #f9f9f9;\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n    border: none;\n    font-family: ${theme.fonts.primaryFontRegular};\n  }\n  .ql-editor {\n    padding: 16px 16px;\n    height: 110px;\n  }\n  & .rdw-editor-toolbar,\n  .ql-toolbar {\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    background-color: #f4f6ff;\n    border: none;\n    & button {\n      padding: 0;\n    }\n  }\n  & .rdw-option-wrapper {\n    background-color: transparent;\n    border: 1px solid transparent;\n    &:hover {\n      box-shadow: none;\n    }\n  }\n  & .ql-active {\n    box-shadow: none;\n    border: 1px solid rgb(200, 210, 220) !important;\n  }\n  & .rdw-editor-main {\n    padding: 0 17px 10px;\n    font-family: ${theme.fonts.primaryFontRegular};\n  }\n  & .public-DraftEditorPlaceholder-root,\n  & .quill > .ql-container > .ql-editor.ql-blank::before {\n    font-family: ${theme.fonts.primaryFontSemiBold};\n    font-size: 14px;\n    color: #acb1c2;\n    font-style: normal;\n  }\n  & .blockquote .rdw-option-wrapper {\n    content: \"\";\n  }\n  & .ql-toolbar.ql-snow {\n    padding: 10px;\n    .ql-formats {\n      width: 100%;\n      display: flex;\n      justify-content: space-between;\n    }\n    .ql-align {\n      outline: none;\n    }\n  }\n\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints8 = theme.breakpoints) === null || _theme$breakpoints8 === void 0 ? void 0 : _theme$breakpoints8.sm_up} {\n    max-width: 730px;\n    .ql-editor {\n      height: 80px;\n    }\n    & .ql-toolbar.ql-snow {\n      padding: 12px 12px 16px;\n      .ql-formats {\n        display: inline-block;\n        vertical-align: middle;\n      }\n      .ql-formats button {\n        margin-right: 60px;\n      }\n    }\n  }\n`;\nconst PrivateContainer = styled.div`\n  display: flex;\n  align-items: center;\n  user-select: none;\n`;\nconst LockIcon = styled.img`\n  width: 10px;\n  height: 13px;\n  margin: 0 8px 0 0;\n  object-fit: contain;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints9 = theme.breakpoints) === null || _theme$breakpoints9 === void 0 ? void 0 : _theme$breakpoints9.sm_up} {\n    width: 24px;\n    height: 24px;\n  }\n`;\nconst PrivateText = styled.div`\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  font-size: 12px;\n  color: #acb1c2;\n  margin-right: 20px;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints10 = theme.breakpoints) === null || _theme$breakpoints10 === void 0 ? void 0 : _theme$breakpoints10.sm_up} {\n    color: #293461;\n    font-size: 14px;\n  }\n`;\nconst EmptyMsg = styled.div`\n  color: ${COLORS.COLOR_DARK};\n  font-weight: 500;\n  letter-spacing: 0.1px;\n  font-size: 14px;\n  margin: 20px 0 30px 0;\n  font-family: ${theme.fonts.primaryFontBold};\n  text-align: center;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints11 = theme.breakpoints) === null || _theme$breakpoints11 === void 0 ? void 0 : _theme$breakpoints11.sm_up} {\n    margin: 20px 0px;\n    font-size: 24px;\n  }\n`;\nconst SmallScreen = styled.div`\n  margin-top: 10px;\n  display: block;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints12 = theme.breakpoints) === null || _theme$breakpoints12 === void 0 ? void 0 : _theme$breakpoints12.sm_up} {\n    display: none;\n  }\n`;\nconst BigScreen = styled.div`\n  display: none;\n  @media ${theme === null || theme === void 0 ? void 0 : (_theme$breakpoints13 = theme.breakpoints) === null || _theme$breakpoints13 === void 0 ? void 0 : _theme$breakpoints13.sm_up} {\n    display: block;\n  }\n`;","map":{"version":3,"sources":["/home/justact/13-12-2021(Frontend Dev)/justact-fe/src/components/pages/NegotiationPages/common/CommentBox.js"],"names":["React","useState","useEffect","useRef","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","makeStyles","Menu","MenuItem","CircularProgress","StatusBadge","Images","DropDown","Icon","Actions","Heading","Header","styled","css","COLORS","theme","_","ReactQuill","moment","PrimaryCTAButton","CaseService","useLoader","useSnackbar","getErrorMessage","parseTimeStamp","useUser","InfiniteScroll","icons","Quill","import","require","modules","toolbar","align","useStyles","themes","root","boxShadow","breakpoints","up","border","content","margin","details","display","flexDirection","padding","paper","menuRoot","fontFamily","fonts","primaryFontSemiBold","fontSize","color","COLOR_DARK","flex","alignItems","roleColors","mediator","caseManager","respondent","claimant","other","ESCAPE_HTML_REGEX","CommentBox","title","status","errorText","comments","caseId","setComments","disabled","hideAddComment","hasMediator","hasCaseManager","partyList","kind","classes","expanded","setExpanded","length","trigggerStateChange","setTrigggerStateChange","anchorEl","setAnchorEl","chatContainerRef","comment","setComment","enqueueSnackbar","setLoader","userObject","currentOwnerParty","setCurrentOwnerParty","handleClick","event","currentTarget","handleClose","currentPartyId","forEach","el","party","agents","agent","userId","id","current","scrollTop","scrollHeight","send","visibilityType","partyId","state","message","postbody","visibilityPartyId","response","sendComment","currentComment","c","owner","variant","error","loadMore","console","log","e","marginBottom","dropDownArrow","sort","a","b","Date","created_at","map","ownerType","name","marginLeft","ownerRole","startCase","find","__html","isEmpty","zoomLink","date","format","isAfter","add","disable","window","open","url","text","replace","trim","Boolean","filter","item","index","partyRole","capitalize","Title","div","sm_up","MsgBox","Container","Label","primaryFontBold","ButtonContainer","ParyName","MenuLabel","INPUT_LABEL","CommentContainer","props","isOwner","LIGHT_BLUE","PRIMARY_WHITE","INPUT_BORDER","PRIMARY_BLACK","CommentUserName","BTN_GREEN","CommentTimestamp","CommentContent","primaryFontExtraBold","SenderRole","role","Object","keys","key","Loader","EditorContainer","primaryFontRegular","PrivateContainer","LockIcon","img","PrivateText","EmptyMsg","SmallScreen","BigScreen"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  makeStyles,\n  Menu,\n  MenuItem,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport StatusBadge from \"../../../common/StatusBadge\";\nimport { Images } from \"../../../../assets/images\";\nimport { DropDown, Icon, Actions, Heading, Header } from \"../styles\";\nimport styled, { css } from \"styled-components\";\nimport COLORS from \"../../../../assets/Colors\";\nimport theme from \"../../../../assets/theme\";\nimport _ from \"lodash\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport moment from \"moment\";\nimport { PrimaryCTAButton } from \"../../../common/Buttons\";\nimport CaseService from \"../../../../services/CaseService\";\nimport useLoader from \"../../../../hooks/useLoader\";\nimport { useSnackbar } from \"notistack\";\nimport { getErrorMessage, parseTimeStamp } from \"../../../../helpers/functions\";\nimport useUser from \"../../../../hooks/useUser\";\nimport InfiniteScroll from \"react-infinite-scroller\";\n\nvar icons = ReactQuill.Quill.import(\"ui/icons\");\nicons[\n  \"bold\"\n] = `<img src=${require(\"../../../../assets/images/editor/bold.svg\")} aria-hidden=\"true\" />`;\nicons[\n  \"italic\"\n] = `<img src=${require(\"../../../../assets/images/editor/italics.svg\")} aria-hidden=\"true\" />`;\nicons[\n  \"underline\"\n] = `<img src=${require(\"../../../../assets/images/editor/underline.svg\")} aria-hidden=\"true\" />`;\nicons[\n  \"blockquote\"\n] = `<img src=${require(\"../../../../assets/images/editor/blockQuote.svg\")} aria-hidden=\"true\" />`;\nicons[\"align\"][\n  \"\"\n] = `<img src=${require(\"../../../../assets/images/editor/leftAlign.svg\")} aria-hidden=\"true\" />`;\nicons[\"align\"][\n  \"center\"\n] = `<img src=${require(\"../../../../assets/images/editor/centerAlign.svg\")} aria-hidden=\"true\" />`;\nicons[\"align\"][\n  \"right\"\n] = `<img src=${require(\"../../../../assets/images/editor/rightAlign.svg\")} aria-hidden=\"true\" />`;\n\nconst modules = {\n  toolbar: [\n    [\n      { align: \"\" },\n      { align: \"center\" },\n      { align: \"right\" },\n      \"bold\",\n      \"italic\",\n      \"underline\",\n      \"blockquote\",\n    ],\n  ],\n};\n\nconst useStyles = makeStyles((themes) => ({\n  root: {\n    boxShadow: \"none\",\n    [themes.breakpoints.up(640)]: {\n      border: `solid 0.5px #e1e3ee`,\n    },\n  },\n  content: {\n    margin: `0 !important`,\n    \"& .MuiExpansionPanelSummary-content.Mui-expanded\": {\n      margin: `0 !important`,\n    },\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    padding: `0px !important`,\n  },\n  paper: {\n    boxShadow: \"none\",\n    border: \"solid 0.5px #e1e3ee\",\n  },\n  menuRoot: {\n    fontFamily: theme.fonts.primaryFontSemiBold,\n    fontSize: 12,\n    color: COLORS.COLOR_DARK,\n    display: \"flex\",\n    flex: 1,\n    alignItems: \"center\",\n  },\n}));\n\nconst roleColors = {\n  mediator: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(246, 180, 54, 0.3)\",\n  },\n  caseManager: {\n    color: \"#f4f6ff\",\n    \"background-color\": \"#293461\",\n  },\n  respondent: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(255, 60, 60, 0.3)\",\n  },\n  claimant: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(0, 131, 140, 0.3)\",\n  },\n  other: {\n    color: \"#293461\",\n    \"background-color\": \"rgba(0, 131, 140, 0.3)\",\n  },\n};\n\nconst ESCAPE_HTML_REGEX = /(<([^>]+)>)/gi;\n\nexport default function CommentBox({\n  title,\n  status,\n  errorText,\n  comments,\n  caseId,\n  setComments,\n  disabled = false,\n  hideAddComment = false,\n  hasMediator = false,\n  hasCaseManager = false,\n  partyList = [],\n  kind = \"Mediator\",\n}) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState(\n    comments?.length > 0 || !hideAddComment\n  );\n  const [trigggerStateChange, setTrigggerStateChange] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const chatContainerRef = useRef();\n  const [comment, setComment] = useState(\"\");\n  const { enqueueSnackbar } = useSnackbar();\n  const { setLoader } = useLoader();\n  const { userObject } = useUser();\n  const [currentOwnerParty, setCurrentOwnerParty] = useState(\"\");\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  useEffect(() => {\n    if (trigggerStateChange) {\n      setTrigggerStateChange(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [trigggerStateChange]);\n\n  useEffect(() => {\n    if (partyList?.length) {\n      let currentPartyId = \"\";\n      partyList.forEach((el) => {\n        el.party.agents.forEach((agent) => {\n          if (agent?.userId === userObject?.id) {\n            currentPartyId = el.party?.id;\n          }\n        });\n      });\n      setCurrentOwnerParty(currentPartyId);\n    }\n  }, [partyList, userObject]);\n\n  useEffect(() => {\n    if (chatContainerRef?.current) {\n      chatContainerRef.current.scrollTop =\n        chatContainerRef.current.scrollHeight;\n    }\n  }, [chatContainerRef]);\n\n  async function send(visibilityType = \"all\", partyId) {\n    try {\n      setLoader({ state: true, message: \"Submitting response...\" });\n      const postbody = {\n        content: comment,\n        visibilityType,\n        visibilityPartyId: partyId,\n      };\n      const response = await CaseService.sendComment(caseId, postbody);\n      if (response?.currentComment) {\n        setComments((c) => [\n          { ...response?.currentComment, owner: userObject },\n          ...c,\n        ]);\n        enqueueSnackbar(response?.message, {\n          variant: \"success\",\n        });\n      }\n    } catch (error) {\n      const message = getErrorMessage(error);\n      enqueueSnackbar(message, {\n        variant: \"error\",\n      });\n    } finally {\n      setLoader({ state: false });\n    }\n  }\n\n  // useEffect(() => {}, [currentPage]);\n\n  const loadMore = () => {\n    console.log(\"load more\");\n  };\n\n  console.log(\"comments?.length\", disabled)\n  return (\n    <ExpansionPanel className={classes.root} expanded={expanded}>\n      <ExpansionPanelSummary\n        classes={{ content: classes.content }}\n        onClick={() => setExpanded((e) => !e)}\n      >\n        <Header>\n          <div className=\"title-container\">\n            <Heading\n              style={{\n                marginBottom: \"unset\",\n              }}\n            >\n              <Title>{title}</Title>\n            </Heading>\n            {status && (\n              <StatusBadge\n                text={\n                  status === \"success\"\n                    ? \"Negotiation Successful\"\n                    : errorText\n                    ? errorText\n                    : \"Negotiation In Progress\"\n                }\n                status={status}\n              />\n            )}\n          </div>\n          <Actions>\n            <DropDown>\n              <Icon\n                src={Images.dropDownArrow}\n                alt=\"dropdown\"\n                expanded={expanded}\n              />\n            </DropDown>\n          </Actions>\n        </Header>\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className={classes.details}>\n        {comments?.length > 0 || !hideAddComment ? (\n          <div>\n            <MsgBox ref={chatContainerRef}>\n              <InfiniteScroll\n                pageStart={0}\n                loadMore={loadMore}\n                initialLoad={false}\n                hasMore={false}\n                useWindow={false}\n                threshold={50}\n                isReverse={true}\n                loader={\n                  <Loader key={0}>\n                    <CircularProgress />\n                  </Loader>\n                }\n              >\n                {\" \"}\n                {comments\n                  ?.sort(\n                    (a, b) =>\n                      new Date(moment(a?.created_at)) -\n                      new Date(moment(b?.created_at))\n                  )\n                  ?.map((comment) => (\n                    <CommentContainer\n                      isOwner={\n                        comment?.partyId === currentOwnerParty &&\n                        comment?.ownerType === \"agent\"\n                      }\n                    >\n                      <div id=\"flex\">\n                        <div className=\"flex\">\n                          <CommentUserName>\n                            {comment?.owner?.name}\n                          </CommentUserName>\n                          <SenderRole\n                            style={{ marginLeft: 15 }}\n                            role={\n                              roleColors[\n                                comment?.ownerType === \"agent\"\n                                  ? comment?.ownerRole\n                                  : comment?.ownerType\n                              ]\n                            }\n                          >\n                            {_.startCase(\n                              comment?.ownerType === \"agent\"\n                                ? comment?.ownerRole\n                                : comment?.ownerType === \"mediator\"\n                                ? kind\n                                : comment?.ownerType\n                            )}\n                          </SenderRole>\n                        </div>\n                        <PrivateContainer>\n                          <BigScreen>\n                            {comment?.visibilityType !== \"all\" && (\n                              <PrivateContainer>\n                                <LockIcon\n                                  src={require(\"../../../../assets/images/lock.svg\")}\n                                />\n                                <PrivateText>\n                                  Private to{\" \"}\n                                  {comment?.visibilityPartyId\n                                    ? partyList?.find(\n                                        (el) =>\n                                          el?.partyId ===\n                                          comment?.visibilityPartyId\n                                      )?.party?.name ||\n                                      _.startCase(comment?.visibilityType)\n                                    : comment?.visibilityType === \"mediator\"\n                                    ? kind\n                                    : _.startCase(comment?.visibilityType)}\n                                </PrivateText>\n                              </PrivateContainer>\n                            )}\n                          </BigScreen>\n                        </PrivateContainer>\n                      </div>\n                      <CommentTimestamp>\n                        {/* {moment(parseTimeStamp(comment?.created_at)).format(\n                          \"MMMM D, YYYY\"\n                        ) +\n                          \" at \" +\n                          moment(parseTimeStamp(comment?.created_at)).format(\n                            \"hh:mm A\"\n                          )} */}\n                      </CommentTimestamp>\n                      <SmallScreen>\n                        {comment?.visibilityType !== \"all\" && (\n                          <PrivateContainer>\n                            <LockIcon\n                              src={require(\"../../../../assets/images/padlock.svg\")}\n                            />\n                            <PrivateText>\n                              Private to{\" \"}\n                              {comment?.visibilityPartyId\n                                ? partyList?.find(\n                                    (el) =>\n                                      el?.partyId === comment?.visibilityPartyId\n                                  )?.party?.name ||\n                                  _.startCase(comment?.visibilityType)\n                                : comment?.visibilityType === \"mediator\"\n                                ? kind\n                                : _.startCase(comment?.visibilityType)}\n                            </PrivateText>\n                          </PrivateContainer>\n                        )}\n                      </SmallScreen>\n                      {comment?.content && (\n                        <CommentContent\n                          dangerouslySetInnerHTML={{\n                            __html: comment?.content,\n                          }}\n                        />\n                      )}\n                      {!_.isEmpty(comment?.zoomLink) && (\n                        <div>\n                          <div className=\"data-container\">\n                            <div className=\"data-field\">\n                              <div className=\"label\">Date</div>\n                              <div className=\"value\">\n                                {moment(\n                                  new Date(comment?.zoomLink?.date)\n                                ).format(\"DD-MM-YYYY\")}\n                              </div>\n                            </div>\n                            <div\n                              className=\"data-field\"\n                              style={{ marginLeft: 30 }}\n                            >\n                              <div className=\"label\">Time</div>\n                              <div className=\"value\">\n                                {moment(\n                                  new Date(comment?.zoomLink?.date)\n                                ).format(\"hh:mm A\")}{\" \"}\n                                (IST)\n                              </div>\n                            </div>\n                          </div>\n                          <div className=\"action_container\">\n                            <div className=\"action-btn\">\n                              <PrimaryCTAButton\n                                disabled={\n                                  moment(new Date()).isAfter(\n                                    moment(\n                                      new Date(comment?.zoomLink?.date)\n                                    ).add(1, \"day\")\n                                  ) || comment?.zoomLink?.disable\n                                }\n                                onClick={() =>\n                                  window.open(comment?.zoomLink?.url, \"_blank\")\n                                }\n                              >\n                                Join\n                              </PrimaryCTAButton>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </CommentContainer>\n                  ))}\n              </InfiniteScroll>\n            </MsgBox>\n            <div style={{ padding: 20 }}>\n              {hideAddComment ? null : (\n                <Container>\n                  <EditorContainer>\n                    <ReactQuill\n                      onChange={(text) => setComment(text)}\n                      modules={modules}\n                      placeholder=\"Record the Proceedings\"\n                      readOnly={disabled}\n                    />\n                  </EditorContainer>\n                  <ButtonContainer>\n                    <PrimaryCTAButton\n                      aria-controls=\"comment-send-menu\"\n                      aria-haspopup=\"true\"\n                      onClick={handleClick}\n                      disabled={\n                        disabled ||\n                        !comment?.replace(ESCAPE_HTML_REGEX, \"\").trim()\n                      }\n                    >\n                      Send\n                    </PrimaryCTAButton>\n                    <Menu\n                      id=\"comment-send-menu\"\n                      anchorEl={anchorEl}\n                      keepMounted\n                      open={Boolean(anchorEl)}\n                      onClose={handleClose}\n                      classes={{ paper: classes.paper }}\n                    >\n                      <Label>SEND TO</Label>\n                      <MenuItem\n                        className={classes.menuRoot}\n                        onClick={() => send(\"all\")}\n                      >\n                        All\n                      </MenuItem>\n                      {!!hasMediator && (\n                        <MenuItem\n                          className={classes.menuRoot}\n                          onClick={() => send(\"mediator\")}\n                        >\n                          {kind}\n                        </MenuItem>\n                      )}\n                      {hasCaseManager && (\n                        <MenuItem\n                          className={classes.menuRoot}\n                          onClick={() => send(\"caseManager\")}\n                        >\n                          Case Manager\n                        </MenuItem>\n                      )}\n                      {partyList\n                        ?.filter((el) => el?.party?.id !== currentOwnerParty)\n                        ?.map((item, index) => (\n                          <MenuItem\n                            key={index}\n                            className={classes.menuRoot}\n                            onClick={() => send(item?.partyRole, item?.partyId)}\n                          >\n                            <ParyName title={item?.party?.name}>\n                              {item?.party?.name}\n                            </ParyName>\n                            <MenuLabel className=\"partyLabel\">\n                              {_.capitalize(item?.partyRole)}\n                            </MenuLabel>\n                          </MenuItem>\n                        ))}\n                    </Menu>\n                  </ButtonContainer>\n                </Container>\n              )}\n            </div>\n          </div>\n        ) : (\n          <EmptyMsg>There are no comments yet.</EmptyMsg>\n        )}\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n\nconst Title = styled.div`\n  margin-left: 15px;\n  text-transform: none;\n  font-weight: 800;\n  font-size: 14px;\n  @media ${theme?.breakpoints?.sm_up} {\n    margin-left: 21px;\n    font-size: 18px;\n  }\n`;\n\nconst MsgBox = styled.div`\n  padding: 0 15px 15px;\n  max-height: 400px;\n  overflow: auto;\n  @media ${theme?.breakpoints?.sm_up} {\n    padding: 0 20px 20px;\n  }\n`;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  @media ${theme?.breakpoints?.sm_up} {\n    flex-direction: row;\n  }\n`;\n\nconst Label = styled.div`\n  font-family: ${theme.fonts.primaryFontBold};\n  font-size: 10px;\n  letter-spacing: 0.33px;\n  color: #acb1c2;\n  padding: 0 16px 5px;\n`;\n\nconst ButtonContainer = styled.div`\n  position: relative;\n  margin: 15px 10px 0 10px;\n  @media ${theme?.breakpoints?.sm_up} {\n    margin: 0;\n    margin-left: 24px;\n    align-self: flex-end;\n    width: 144px;\n  }\n`;\n\nconst ParyName = styled.div`\n  max-width: 100px;\n  width: 100%;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\n\nconst MenuLabel = styled.div`\n  color: ${COLORS.INPUT_LABEL};\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  font-size: 10px;\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n  margin-left: 10px;\n`;\n\nconst CommentContainer = styled.div`\n  padding: 20px 10px;\n  border-radius: 7px;\n  background-color: ${(props) =>\n    props.isOwner ? COLORS.LIGHT_BLUE : COLORS.PRIMARY_WHITE};\n  border: solid 1px\n    ${(props) => (props.isOwner ? COLORS.COLOR_DARK : COLORS.INPUT_BORDER)};\n  margin-bottom: 12px;\n  max-width: 730px;\n  & #flex {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  @media ${theme?.breakpoints?.sm_up} {\n    padding: 18px;\n  }\n  & .data-container {\n    display: flex;\n    padding: 15px 0px;\n    & .data-field {\n      font-family: ${theme.fonts.primaryFontSemiBold};\n      & .label {\n        color: ${COLORS.INPUT_LABEL};\n        font-size: 10px;\n      }\n      & .value {\n        color: ${COLORS.PRIMARY_BLACK};\n        margin-top: 2px;\n      }\n    }\n  }\n\n  & .action_container {\n    display: flex;\n    padding-top: 15px;\n    .action-btn {\n      width: 150px;\n    }\n`;\n\nconst CommentUserName = styled.div`\n  color: ${COLORS.BTN_GREEN};\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  font-size: 14px;\n  @media ${theme?.breakpoints?.sm_up} {\n    font-size: 16px;\n  }\n`;\n\nconst CommentTimestamp = styled.div`\n  color: #acb1c2;\n  font-size: 10px;\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  @media ${theme?.breakpoints?.sm_up} {\n    font-size: 12px;\n    margin-top: 8px;\n  }\n`;\n\nconst CommentContent = styled.div`\n  font-size: 14px;\n  word-break: break-word;\n  color: ${COLORS.COLOR_DARK};\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  margin-top: 18px;\n  & strong,\n  & bold {\n    font-family: ${theme.fonts.primaryFontExtraBold};\n  }\n  & .ql-align-center {\n    text-align: center;\n  }\n  & .ql-align-right {\n    text-align: right;\n  }\n  & blockquote {\n    border-left: 4px solid #ccc;\n    margin-bottom: 5px;\n    margin-top: 5px;\n    padding-bottom: 5px;\n    padding-top: 5px;\n    padding-left: 16px;\n    background-color: #f9f9f9;\n  }\n`;\n\nconst SenderRole = styled.div`\n  font-size: 12px;\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  padding: 4px 10px;\n  border-radius: 4px;\n  ${({ role }) =>\n    role\n      ? Object.keys(role).map(\n          (key) =>\n            css`\n              ${key}: ${role[key]};\n            `\n        )\n      : null}\n  user-select:none;\n`;\n\nconst Loader = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst EditorContainer = styled.div`\n  width: 100%;\n  & .rdw-editor-wrapper,\n  .ql-editor,\n  .ql-container {\n    background-color: #f9f9f9;\n    border-bottom-left-radius: 8px;\n    border-bottom-right-radius: 8px;\n    border: none;\n    font-family: ${theme.fonts.primaryFontRegular};\n  }\n  .ql-editor {\n    padding: 16px 16px;\n    height: 110px;\n  }\n  & .rdw-editor-toolbar,\n  .ql-toolbar {\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    background-color: #f4f6ff;\n    border: none;\n    & button {\n      padding: 0;\n    }\n  }\n  & .rdw-option-wrapper {\n    background-color: transparent;\n    border: 1px solid transparent;\n    &:hover {\n      box-shadow: none;\n    }\n  }\n  & .ql-active {\n    box-shadow: none;\n    border: 1px solid rgb(200, 210, 220) !important;\n  }\n  & .rdw-editor-main {\n    padding: 0 17px 10px;\n    font-family: ${theme.fonts.primaryFontRegular};\n  }\n  & .public-DraftEditorPlaceholder-root,\n  & .quill > .ql-container > .ql-editor.ql-blank::before {\n    font-family: ${theme.fonts.primaryFontSemiBold};\n    font-size: 14px;\n    color: #acb1c2;\n    font-style: normal;\n  }\n  & .blockquote .rdw-option-wrapper {\n    content: \"\";\n  }\n  & .ql-toolbar.ql-snow {\n    padding: 10px;\n    .ql-formats {\n      width: 100%;\n      display: flex;\n      justify-content: space-between;\n    }\n    .ql-align {\n      outline: none;\n    }\n  }\n\n  @media ${theme?.breakpoints?.sm_up} {\n    max-width: 730px;\n    .ql-editor {\n      height: 80px;\n    }\n    & .ql-toolbar.ql-snow {\n      padding: 12px 12px 16px;\n      .ql-formats {\n        display: inline-block;\n        vertical-align: middle;\n      }\n      .ql-formats button {\n        margin-right: 60px;\n      }\n    }\n  }\n`;\n\nconst PrivateContainer = styled.div`\n  display: flex;\n  align-items: center;\n  user-select: none;\n`;\n\nconst LockIcon = styled.img`\n  width: 10px;\n  height: 13px;\n  margin: 0 8px 0 0;\n  object-fit: contain;\n  @media ${theme?.breakpoints?.sm_up} {\n    width: 24px;\n    height: 24px;\n  }\n`;\n\nconst PrivateText = styled.div`\n  font-family: ${theme.fonts.primaryFontSemiBold};\n  font-size: 12px;\n  color: #acb1c2;\n  margin-right: 20px;\n  @media ${theme?.breakpoints?.sm_up} {\n    color: #293461;\n    font-size: 14px;\n  }\n`;\n\nconst EmptyMsg = styled.div`\n  color: ${COLORS.COLOR_DARK};\n  font-weight: 500;\n  letter-spacing: 0.1px;\n  font-size: 14px;\n  margin: 20px 0 30px 0;\n  font-family: ${theme.fonts.primaryFontBold};\n  text-align: center;\n  @media ${theme?.breakpoints?.sm_up} {\n    margin: 20px 0px;\n    font-size: 24px;\n  }\n`;\n\nconst SmallScreen = styled.div`\n  margin-top: 10px;\n  display: block;\n  @media ${theme?.breakpoints?.sm_up} {\n    display: none;\n  }\n`;\n\nconst BigScreen = styled.div`\n  display: none;\n  @media ${theme?.breakpoints?.sm_up} {\n    display: block;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}