{"ast":null,"code":"var _jsxFileName = \"/home/justact/13-12-2021(Frontend Dev)/justact-fe/src/components/internal/PartyDetails/PartyDetails.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport ActionBar from \"../../common/ActionBar\";\nimport _ from \"lodash\";\nimport PartyService from \"../../../services/PartyService\";\nimport { getErrorMessage } from \"../../../helpers/functions\";\nimport AgentListModal from \"../../common/AgentListModal/AgentListDrawer\";\nimport { BasicDetailsLabel, FieldWrapper, BasicDetailsWrapper, BasicDetailsValue, Row, HyperLink, Padding, BasicDetailsItem, Container, Address, PartyTable, Heading, MobileScreen, BigScreen } from \"./styles\";\nimport { StyledLabelAgent } from \"../../internal/CreateParty/styles\";\nimport { basicLabels, documentLabels } from \"./constants\";\nimport useLoader from \"../../../hooks/useLoader\";\nimport { useSnackbar } from \"notistack\";\nimport labels from \"../../../helpers/labels.json\";\nimport useUser from \"../../../hooks/useUser\";\nimport { states } from \"../../../helpers/constants\";\nimport { navigate } from \"@reach/router\";\nimport CasesTable from \"../../common/CasesTable\";\nimport { Table } from \"@material-ui/core\";\nimport { StyledLabel } from \"../CreateCase/Styles\";\n\nfunction getAgentName(agents, isPrimary) {\n  const agentList = isPrimary ? agents === null || agents === void 0 ? void 0 : agents.filter(el => el.role === \"primary\") : agents === null || agents === void 0 ? void 0 : agents.filter(el => el.role !== \"primary\");\n\n  if (agentList === null || agentList === void 0 ? void 0 : agentList.length) {\n    let final = [];\n\n    for (const agent of agentList) {\n      var _agent$user;\n\n      if (agent === null || agent === void 0 ? void 0 : (_agent$user = agent.user) === null || _agent$user === void 0 ? void 0 : _agent$user.name) {\n        final.push(agent.user.name);\n      }\n    }\n\n    return final.join(\", \");\n  }\n}\n\nconst Index = ({\n  party,\n  setParty,\n  partyId,\n  createAgent = () => {}\n}) => {\n  var _party$agents, _states$find, _party$agents2;\n\n  const initialState = [_.startCase(labels.my_parties)];\n  const [breadcrumbs, setBreadcrumbs] = useState(initialState);\n  const {\n    setLoader\n  } = useLoader();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    userObject\n  } = useUser();\n  const [isPrimaryAgent, setIsPrimaryAgent] = useState();\n  const [primaryAgentList, setPrimaryAgentList] = useState([]);\n  const [agentList, setAgentList] = useState([]);\n  const MTRef = useRef();\n  const [opendrawer, setOpenDrawer] = useState(false);\n\n  const onBreadcrumbClick = selected => {\n    switch (_.snakeCase(selected)) {\n      case labels.my_parties:\n        navigate(\"/dashboard/parties\");\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  useEffect(() => {\n    async function getParty(partyId) {\n      setLoader({\n        state: true,\n        message: \"Fetching party details...\"\n      });\n\n      try {\n        const party_response = await PartyService.getPartyOrDraft(partyId);\n\n        if (party_response) {\n          setParty(party_response);\n          setPrimaryAgentList(getAgentName(party_response === null || party_response === void 0 ? void 0 : party_response.agents, true));\n          setAgentList(getAgentName(party_response === null || party_response === void 0 ? void 0 : party_response.agents, false));\n\n          const currentAgent = _.find(party_response === null || party_response === void 0 ? void 0 : party_response.agents, agent => agent.userId === userObject.id);\n\n          if ((currentAgent === null || currentAgent === void 0 ? void 0 : currentAgent.role) === \"primary\") {\n            setIsPrimaryAgent(true);\n          }\n        }\n      } catch (error) {\n        const message = getErrorMessage(error);\n        enqueueSnackbar(message, {\n          variant: \"error\"\n        });\n      } finally {\n        setLoader({\n          state: false\n        });\n      }\n    }\n\n    if (partyId && !_.isEmpty(userObject)) {\n      getParty(partyId);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [partyId, userObject]);\n  useEffect(() => {\n    if (!_.isEmpty(party)) {\n      setBreadcrumbs([...initialState, party.name]);\n      setPrimaryAgentList(getAgentName(party === null || party === void 0 ? void 0 : party.agents, true));\n      setAgentList(getAgentName(party === null || party === void 0 ? void 0 : party.agents, false));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [party]);\n  const actions = [{\n    text: labels[\"actions.add_agents\"],\n    props: {\n      onClick: createAgent\n    }\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ActionBar, {\n    breadcrumbs: breadcrumbs,\n    onBreadcrumbClick: onBreadcrumbClick,\n    actions: isPrimaryAgent ? actions : [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Padding, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, \"Party Details\"), /*#__PURE__*/React.createElement(BasicDetailsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, _.keys(basicLabels).map(key => /*#__PURE__*/React.createElement(BasicDetailsItem, {\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, key === \"documentNumber\" ? documentLabels[(party === null || party === void 0 ? void 0 : party.documentKind) === \"aadhar\" ? \"aadhaar\" : party === null || party === void 0 ? void 0 : party.documentKind] : basicLabels[key]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    transform: key === \"kind\" || key === \"name\" ? \"capitalize\" : \"uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, party[key])))), /*#__PURE__*/React.createElement(BasicDetailsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MobileScreen, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, (primaryAgentList === null || primaryAgentList === void 0 ? void 0 : primaryAgentList.length) > 0 && /*#__PURE__*/React.createElement(BasicDetailsItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 19\n    }\n  }, party === null || party === void 0 ? void 0 : (_party$agents = party.agents) === null || _party$agents === void 0 ? void 0 : _party$agents.length), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 19\n    }\n  }, getAgentName(party === null || party === void 0 ? void 0 : party.agents, true))), /*#__PURE__*/React.createElement(BasicDetailsItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, labels[\"party.documents\"]), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(HyperLink, {\n    onClick: () => window.open(party.documentUrl),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  }, documentLabels[(party === null || party === void 0 ? void 0 : party.documentKind) === \"aadhar\" ? \"aadhaar\" : party === null || party === void 0 ? void 0 : party.documentKind])), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, party.authorizationLetterUrl ? /*#__PURE__*/React.createElement(HyperLink, {\n    onClick: () => window.open(party.authorizationLetterUrl),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, labels.authorisation_letter) : \"\")), party.gstNumber && /*#__PURE__*/React.createElement(BasicDetailsItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, labels[\"party.gstNumber\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, party.gstNumber)))), /*#__PURE__*/React.createElement(Heading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, \"Address\"), party.houseNumber && /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Address, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 19\n    }\n  }, labels[\"user.house\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 19\n    }\n  }, party.houseNumber)), /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, labels[\"user.locality\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 19\n    }\n  }, party.locality)), /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 19\n    }\n  }, labels[\"user.landmark\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, party.landmark)), /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 19\n    }\n  }, labels[\"user.city\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 19\n    }\n  }, party.city)), /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 19\n    }\n  }, labels[\"user.state\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 19\n    }\n  }, (_states$find = states.find(state => state.value === (party === null || party === void 0 ? void 0 : party.state))) === null || _states$find === void 0 ? void 0 : _states$find.label)), /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  }, _.upperCase(labels[\"user.pin\"])), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 19\n    }\n  }, party.pin)))), /*#__PURE__*/React.createElement(BigScreen, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }\n  }, (primaryAgentList === null || primaryAgentList === void 0 ? void 0 : primaryAgentList.length) > 0 && /*#__PURE__*/React.createElement(FieldWrapper, {\n    style: {\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(StyledLabelAgent, {\n    tooltip: \"An agent with special rights who can create other Agents for their Party\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 23\n    }\n  }, labels[\"party.primary_agents\"])), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }, getAgentName(party === null || party === void 0 ? void 0 : party.agents, true))), /*#__PURE__*/React.createElement(FieldWrapper, {\n    style: {\n      marginTop: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, labels[\"party.documents\"]), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(HyperLink, {\n    onClick: () => window.open(party.documentUrl),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 19\n    }\n  }, documentLabels[(party === null || party === void 0 ? void 0 : party.documentKind) === \"aadhar\" ? \"aadhaar\" : party === null || party === void 0 ? void 0 : party.documentKind])), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 17\n    }\n  }, (party === null || party === void 0 ? void 0 : (_party$agents2 = party.agents) === null || _party$agents2 === void 0 ? void 0 : _party$agents2.length) > 0 ? /*#__PURE__*/React.createElement(HyperLink, {\n    style: {\n      display: \"table\"\n    },\n    onClick: () => setOpenDrawer(a => ({ ...a,\n      state: true\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 23\n    }\n  }, \"Agent Details\") : null)), party.gstNumber && /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 19\n    }\n  }, labels[\"party.gstNumber\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 19\n    }\n  }, party.gstNumber))), /*#__PURE__*/React.createElement(BasicDetailsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 13\n    }\n  }, (agentList === null || agentList === void 0 ? void 0 : agentList.length) > 0 && /*#__PURE__*/React.createElement(FieldWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 19\n    }\n  }, labels[\"party.agents\"]), /*#__PURE__*/React.createElement(BasicDetailsValue, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 19\n    }\n  }, agentList))))), /*#__PURE__*/React.createElement(PartyTable, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BasicDetailsLabel, {\n    style: {\n      marginBottom: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 11\n    }\n  }, labels[\"party.cases_associated\"]), /*#__PURE__*/React.createElement(CasesTable, {\n    partyId: partyId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(AgentListModal, {\n    opendrawer,\n    setOpenDrawer,\n    MTRef,\n    partyList: [{\n      party\n    }],\n    displayAuthUrl: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Index;","map":{"version":3,"sources":["/home/justact/13-12-2021(Frontend Dev)/justact-fe/src/components/internal/PartyDetails/PartyDetails.js"],"names":["React","useState","useEffect","useRef","ActionBar","_","PartyService","getErrorMessage","AgentListModal","BasicDetailsLabel","FieldWrapper","BasicDetailsWrapper","BasicDetailsValue","Row","HyperLink","Padding","BasicDetailsItem","Container","Address","PartyTable","Heading","MobileScreen","BigScreen","StyledLabelAgent","basicLabels","documentLabels","useLoader","useSnackbar","labels","useUser","states","navigate","CasesTable","Table","StyledLabel","getAgentName","agents","isPrimary","agentList","filter","el","role","length","final","agent","user","name","push","join","Index","party","setParty","partyId","createAgent","initialState","startCase","my_parties","breadcrumbs","setBreadcrumbs","setLoader","enqueueSnackbar","userObject","isPrimaryAgent","setIsPrimaryAgent","primaryAgentList","setPrimaryAgentList","setAgentList","MTRef","opendrawer","setOpenDrawer","onBreadcrumbClick","selected","snakeCase","getParty","state","message","party_response","getPartyOrDraft","currentAgent","find","userId","id","error","variant","isEmpty","actions","text","props","onClick","keys","map","key","documentKind","window","open","documentUrl","authorizationLetterUrl","authorisation_letter","gstNumber","houseNumber","locality","landmark","city","value","label","upperCase","pin","marginTop","display","a","marginBottom","partyList","displayAuthUrl"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport ActionBar from \"../../common/ActionBar\";\nimport _ from \"lodash\";\nimport PartyService from \"../../../services/PartyService\";\nimport { getErrorMessage } from \"../../../helpers/functions\";\nimport AgentListModal from \"../../common/AgentListModal/AgentListDrawer\"\nimport {\n  BasicDetailsLabel,\n  FieldWrapper,\n  BasicDetailsWrapper,\n  BasicDetailsValue,\n  Row,\n  HyperLink,\n  Padding,\n  BasicDetailsItem,\n  Container,\n  Address,\n  PartyTable,\n  Heading,\n  MobileScreen,\n  BigScreen,\n} from \"./styles\";\n\nimport { StyledLabelAgent } from \"../../internal/CreateParty/styles\";\nimport { basicLabels, documentLabels } from \"./constants\";\nimport useLoader from \"../../../hooks/useLoader\";\nimport { useSnackbar } from \"notistack\";\nimport labels from \"../../../helpers/labels.json\";\nimport useUser from \"../../../hooks/useUser\";\nimport { states } from \"../../../helpers/constants\";\nimport { navigate } from \"@reach/router\";\nimport CasesTable from \"../../common/CasesTable\";\nimport { Table } from \"@material-ui/core\";\nimport { StyledLabel } from \"../CreateCase/Styles\";\n\nfunction getAgentName(agents, isPrimary) {\n  const agentList = isPrimary\n    ? agents?.filter((el) => el.role === \"primary\")\n    : agents?.filter((el) => el.role !== \"primary\");\n  if (agentList?.length) {\n    let final = [];\n    for (const agent of agentList) {\n      if (agent?.user?.name) {\n        final.push(agent.user.name);\n      }\n    }\n    return final.join(\", \");\n  }\n}\n\nconst Index = ({ party, setParty, partyId, createAgent = () => { } }) => {\n  const initialState = [_.startCase(labels.my_parties)];\n  const [breadcrumbs, setBreadcrumbs] = useState(initialState);\n  const { setLoader } = useLoader();\n  const { enqueueSnackbar } = useSnackbar();\n  const { userObject } = useUser();\n  const [isPrimaryAgent, setIsPrimaryAgent] = useState();\n  const [primaryAgentList, setPrimaryAgentList] = useState([]);\n  const [agentList, setAgentList] = useState([]);\n  const MTRef = useRef();\n\n  const [opendrawer, setOpenDrawer] = useState(false);\n  const onBreadcrumbClick = (selected) => {\n    switch (_.snakeCase(selected)) {\n      case labels.my_parties:\n        navigate(\"/dashboard/parties\");\n        break;\n      default:\n        break;\n    }\n  };\n\n  useEffect(() => {\n    async function getParty(partyId) {\n      setLoader({ state: true, message: \"Fetching party details...\" });\n      try {\n        const party_response = await PartyService.getPartyOrDraft(partyId);\n        if (party_response) {\n          setParty(party_response);\n          setPrimaryAgentList(getAgentName(party_response?.agents, true));\n          setAgentList(getAgentName(party_response?.agents, false));\n          const currentAgent = _.find(\n            party_response?.agents,\n            (agent) => agent.userId === userObject.id\n          );\n          if (currentAgent?.role === \"primary\") {\n            setIsPrimaryAgent(true);\n          }\n        }\n      } catch (error) {\n        const message = getErrorMessage(error);\n        enqueueSnackbar(message, {\n          variant: \"error\",\n        });\n      } finally {\n        setLoader({ state: false });\n      }\n    }\n    if (partyId && !_.isEmpty(userObject)) {\n      getParty(partyId);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [partyId, userObject]);\n\n  useEffect(() => {\n    if (!_.isEmpty(party)) {\n      setBreadcrumbs([...initialState, party.name]);\n      setPrimaryAgentList(getAgentName(party?.agents, true));\n      setAgentList(getAgentName(party?.agents, false));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [party]);\n\n  const actions = [\n    {\n      text: labels[\"actions.add_agents\"],\n      props: {\n        onClick: createAgent,\n      },\n    },\n  ];\n  return (\n    <div>\n      <ActionBar\n        breadcrumbs={breadcrumbs}\n        onBreadcrumbClick={onBreadcrumbClick}\n        actions={isPrimaryAgent ? actions : []}\n      />\n      <Padding>\n        <Container>\n          <Heading>Party Details</Heading>\n          <BasicDetailsWrapper>\n            {_.keys(basicLabels).map((key) => (\n              <BasicDetailsItem key={key}>\n                <BasicDetailsLabel>\n                  {key === \"documentNumber\"\n                    ? documentLabels[\n                    party?.documentKind === \"aadhar\"\n                      ? \"aadhaar\"\n                      : party?.documentKind\n                    ]\n                    : basicLabels[key]}\n                </BasicDetailsLabel>\n                <BasicDetailsValue\n                  transform={\n                    key === \"kind\" || key === \"name\"\n                      ? \"capitalize\"\n                      : \"uppercase\"\n                  }\n                >\n                  {party[key]}\n                </BasicDetailsValue>\n              </BasicDetailsItem>\n            ))}\n          </BasicDetailsWrapper>\n\n          <BasicDetailsWrapper>\n            <MobileScreen>\n              {primaryAgentList?.length > 0 && (\n                <BasicDetailsItem>\n                  <BasicDetailsLabel>\n                    {party?.agents?.length}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>\n                    {getAgentName(party?.agents, true)}\n                  </BasicDetailsValue>\n                </BasicDetailsItem>\n              )}\n              <BasicDetailsItem>\n                <BasicDetailsLabel>\n                  {labels[\"party.documents\"]}\n                </BasicDetailsLabel>\n                <Row>\n                  <HyperLink onClick={() => window.open(party.documentUrl)}>\n                    {\n                      documentLabels[\n                      party?.documentKind === \"aadhar\"\n                        ? \"aadhaar\"\n                        : party?.documentKind\n                      ]\n                    }\n                  </HyperLink>\n                </Row>\n                <Row>\n                  {party.authorizationLetterUrl ?\n                    <HyperLink onClick={() => window.open(party.authorizationLetterUrl)}>\n                      {labels.authorisation_letter}\n                    </HyperLink>\n                    : \"\"}\n                </Row>\n              </BasicDetailsItem>\n              {party.gstNumber && (\n                <BasicDetailsItem>\n                  <BasicDetailsLabel>\n                    {labels[\"party.gstNumber\"]}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>{party.gstNumber}</BasicDetailsValue>\n                </BasicDetailsItem>\n              )}\n            </MobileScreen>\n          </BasicDetailsWrapper>\n\n          <Heading>Address</Heading>\n          {party.houseNumber && (\n            <Row>\n              <Address>\n                <FieldWrapper>\n                  <BasicDetailsLabel>{labels[\"user.house\"]}</BasicDetailsLabel>\n                  <BasicDetailsValue>{party.houseNumber}</BasicDetailsValue>\n                </FieldWrapper>\n                <FieldWrapper>\n                  <BasicDetailsLabel>\n                    {labels[\"user.locality\"]}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>{party.locality}</BasicDetailsValue>\n                </FieldWrapper>\n                <FieldWrapper>\n                  <BasicDetailsLabel>\n                    {labels[\"user.landmark\"]}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>{party.landmark}</BasicDetailsValue>\n                </FieldWrapper>\n                <FieldWrapper>\n                  <BasicDetailsLabel>{labels[\"user.city\"]}</BasicDetailsLabel>\n                  <BasicDetailsValue>{party.city}</BasicDetailsValue>\n                </FieldWrapper>\n                <FieldWrapper>\n                  <BasicDetailsLabel>{labels[\"user.state\"]}</BasicDetailsLabel>\n                  <BasicDetailsValue>\n                    {\n                      states.find((state) => state.value === party?.state)\n                        ?.label\n                    }\n                  </BasicDetailsValue>\n                </FieldWrapper>\n                <FieldWrapper>\n                  <BasicDetailsLabel>\n                    {_.upperCase(labels[\"user.pin\"])}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>{party.pin}</BasicDetailsValue>\n                </FieldWrapper>\n              </Address>\n            </Row>\n          )}\n          <BigScreen>\n            <BasicDetailsWrapper>\n              {primaryAgentList?.length > 0 && (\n                <FieldWrapper style={{ marginTop: 30 }}>\n                    <StyledLabelAgent tooltip=\"An agent with special rights who can create other Agents for their Party\">\n                      <BasicDetailsLabel>\n                        {labels[\"party.primary_agents\"]}\n                      </BasicDetailsLabel>\n                    </StyledLabelAgent>\n                    {/* <BasicDetailsLabel>\n                      {party?.agents?.length > 0 ? (\n                        <HyperLink\n                          style={{ display: \"table\" }}\n                          onClick={() => setOpenDrawer((a) => ({ ...a, state: true }))}\n                        >\n                          Agent Details\n                        </HyperLink>\n                      ) : null}\n                    </BasicDetailsLabel> */}\n                  <BasicDetailsValue>\n                    {getAgentName(party?.agents, true)}\n                  </BasicDetailsValue>\n                </FieldWrapper>\n              )}\n              <FieldWrapper style={{ marginTop: 50 }}>\n                <BasicDetailsLabel>\n                  {labels[\"party.documents\"]}\n                </BasicDetailsLabel>\n                <Row>\n                  <HyperLink onClick={() => window.open(party.documentUrl)}>\n                    {\n                      documentLabels[\n                      party?.documentKind === \"aadhar\"\n                        ? \"aadhaar\"\n                        : party?.documentKind\n                      ]\n                    }\n                  </HyperLink>\n                </Row>\n                <Row>\n                  {/* {party.authorizationLetterUrl ?\n                    <HyperLink onClick={() => window.open(party.authorizationLetterUrl)}>\n                      {labels.authorisation_letter}\n                    </HyperLink>\n                    : \"\"} */}\n                  {party?.agents?.length > 0 ? (\n                      <HyperLink\n                        style={{ display: \"table\" }}\n                        onClick={() => setOpenDrawer((a) => ({ ...a, state: true }))}\n                      >\n                        Agent Details\n                      </HyperLink>\n                    ) : null}\n                </Row>\n              </FieldWrapper>\n              {party.gstNumber && (\n                <FieldWrapper>\n                  <BasicDetailsLabel>\n                    {labels[\"party.gstNumber\"]}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>{party.gstNumber}</BasicDetailsValue>\n                </FieldWrapper>\n              )}\n            </BasicDetailsWrapper>\n\n            <BasicDetailsWrapper>\n              {agentList?.length > 0 && (\n                <FieldWrapper>\n                  <BasicDetailsLabel>\n                    {labels[\"party.agents\"]}\n                  </BasicDetailsLabel>\n                  <BasicDetailsValue>{agentList}</BasicDetailsValue>\n                </FieldWrapper>\n              )}\n            </BasicDetailsWrapper>\n          </BigScreen>\n        </Container>\n        <PartyTable>\n          <BasicDetailsLabel style={{ marginBottom: 8 }}>\n            {labels[\"party.cases_associated\"]}\n          </BasicDetailsLabel>\n          <CasesTable partyId={partyId} />\n        </PartyTable>\n      </Padding>\n      <AgentListModal {...{ opendrawer, setOpenDrawer, MTRef, partyList: [{ party }],displayAuthUrl:true }} />\n\n    </div>\n\n  );\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}